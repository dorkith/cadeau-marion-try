<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Jeu du Mot Secret - M√©diapart</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #121212;
    color: #eee;
    max-width: 650px;
    margin: 40px auto;
    padding: 20px;
    user-select: none;
  }
  h1 {
    text-align: center;
    margin-bottom: 0.3em;
    font-weight: 700;
  }
  #questionCounter {
    text-align: center;
    margin-bottom: 1.5em;
    font-size: 1.1em;
    color: #ccc;
  }
  #questionText {
    font-size: 1.3em;
    margin-bottom: 20px;
    min-height: 3em;
  }
  #inputArea input, #inputArea button {
    width: 100%;
    padding: 12px;
    font-size: 1.1rem;
    margin-top: 8px;
    border-radius: 5px;
    border: none;
    outline: none;
  }
  #inputArea button {
    background-color: #1e90ff;
    color: white;
    cursor: pointer;
    font-weight: bold;
  }
  #inputArea button:disabled {
    background-color: #555;
    cursor: default;
  }
  #feedback {
    margin-top: 20px;
    min-height: 2em;
    font-weight: 600;
    font-size: 1.1rem;
  }
  #feedback.success {
    color: #4caf50;
  }
  #feedback.error {
    color: #f44336;
  }
</style>
</head>
<body>

<h1>Jeu du Mot Secret</h1>
<div id="questionCounter"></div>
<div id="questionText"></div>

<div id="inputArea"></div>

<div id="feedback"></div>

<script>
(() => {
  const finalAnswer = "M√©diapart";

  const questions = [
    { text: "1) Tape un mot qui commence par la lettre 'M' (majuscule).", test: ans => ans.trim().startsWith("M") },
    { text: "2) Tape un mot de 9 lettres.", test: ans => ans.trim().length === 9 },
    { text: "3) Tape un mot contenant la lettre 'd' (minuscule).", test: ans => ans.includes("d") },
    { text: "4) Tape un mot contenant la lettre accentu√©e '√©'.", test: ans => ans.includes("√©") },
    { text: "5) Tape un mot qui finit par la lettre 't'.", test: ans => ans.trim().endsWith("t") },
    { text: "6) Tape un mot qui contient exactement deux lettres 'a'.", test: ans => (ans.match(/a/g) || []).length === 2 },
    { text: "7) Tape un mot qui contient la lettre 'p'.", test: ans => ans.includes("p") },
    { text: "8) Tape un mot o√π la 3e lettre est 'i' (minuscule).", test: ans => ans.length >= 3 && ans[2].toLowerCase() === "i" },
    { text: "9) Tape un mot o√π la 5e lettre est 'a'.", test: ans => ans.length >= 5 && ans[4].toLowerCase() === "a" },
    { text: "10) Tape un mot qui contient la lettre 'r'.", test: ans => ans.includes("r") },
    { text: "11) Tape un mot qui commence par 'M√©' (avec accent).", test: ans => ans.startsWith("M√©") },
    { text: "12) Tape un mot sans la lettre 'z'.", test: ans => !ans.includes("z") },
    { text: "13) Tape un mot qui contient la lettre 'i'.", test: ans => ans.includes("i") },
    { text: "14) Tape un mot qui ne contient pas de majuscule sauf la premi√®re lettre.", test: ans => /^[A-Z][a-z√†√¢√§√©√®√™√´√Ø√Æ√¥√∂√π√ª√º√ß]*$/.test(ans) },
    { text: "15) Tape un mot avec au moins une lettre accentu√©e.", test: ans => /[√†√¢√§√©√®√™√´√Ø√Æ√¥√∂√π√ª√º√ß]/i.test(ans) },
    { text: "16) Tape un mot avec exactement 3 voyelles.", test: ans => (ans.match(/[aeiouy√†√¢√§√©√®√™√´√Ø√Æ√¥√∂√π√ª√º]/gi) || []).length === 3 },
    { text: "17) Tape un mot qui ne contient pas la lettre 'o'.", test: ans => !ans.includes("o") },
    { text: "18) Tape un mot dont la derni√®re lettre est 't'.", test: ans => ans.endsWith("t") },
    { text: "19) Tape un mot o√π la lettre 'p' est avant la lettre 'r'.", test: ans => ans.indexOf("p") !== -1 && ans.indexOf("r") !== -1 && ans.indexOf("p") < ans.indexOf("r") },
    { text: "20) Tape un mot qui contient une seule lettre 'm' (majuscule ou minuscule).", test: ans => ((ans.match(/[mM]/g) || []).length === 1) },
    { text: "21) Tape un mot o√π la lettre 'a' est deux fois (au moins).", test: ans => (ans.match(/a/g) || []).length >= 2 },
    { text: "22) Tape un mot qui ne contient pas d'espaces.", test: ans => !ans.includes(" ") },
    { text: "23) Tape un mot qui commence par une majuscule et se termine par 't'.", test: ans => /^[A-Z].*t$/.test(ans) },
    { text: "24) Tape un mot dont la 7e lettre est 'r'.", test: ans => ans.length >= 7 && ans[6].toLowerCase() === "r" },
    { text: "25) Enfin, tape le mot secret (avec la bonne casse).", test: ans => ans === finalAnswer }
  ];

  const questionCounter = document.getElementById("questionCounter");
  const questionText = document.getElementById("questionText");
  const inputArea = document.getElementById("inputArea");
  const feedback = document.getElementById("feedback");

  let currentQuestion = 0;

  function clearUI() {
    inputArea.innerHTML = "";
    feedback.textContent = "";
    feedback.className = "";
  }

  function validateAnswer(ans) {
    // Valide la r√©ponse en v√©rifiant toutes les r√®gles jusqu'√† currentQuestion inclus
    for(let i = 0; i <= currentQuestion; i++) {
      if(!questions[i].test(ans)) {
        return false;
      }
    }
    return true;
  }

  function showQuestion() {
    clearUI();

    if (currentQuestion >= questions.length) {
      questionCounter.textContent = "üéâ Bravo ! Tu as trouv√© le mot secret : " + finalAnswer;
      questionText.textContent = "";
      return;
    }

    const q = questions[currentQuestion];
    questionCounter.textContent = `Question ${currentQuestion + 1} / ${questions.length}`;
    questionText.textContent = q.text;

    const input = document.createElement("input");
    input.type = "text";
    input.autocomplete = "off";
    input.placeholder = "√âcris ta r√©ponse ici...";
    inputArea.appendChild(input);

    const btn = document.createElement("button");
    btn.textContent = "Valider";
    inputArea.appendChild(btn);

    btn.onclick = () => {
      const val = input.value.trim();
      if (val.length === 0) {
        feedback.textContent = "Merci de saisir une r√©ponse.";
        feedback.className = "error";
        return;
      }
      if (validateAnswer(val)) {
        feedback.textContent = "Correct !";
        feedback.className = "success";
        currentQuestion++;
        setTimeout(showQuestion, 700);
      } else {
        feedback.textContent = "Mauvaise r√©ponse, r√©essaie.";
        feedback.className = "error";
      }
    };

    input.addEventListener("keypress", e => {
      if(e.key === "Enter") btn.click();
    });

    input.focus();
  }

  showQuestion();
})();
</script>

</body>
</html>
