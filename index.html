<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Le Jeu du Mot Myst√®re</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 2rem; background: #f5f5f5; }
    #game-container { max-width: 600px; margin: auto; background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
    #rules { margin-bottom: 1rem; }
    .rule { margin-bottom: 0.5rem; font-weight: bold; }
    input[type="text"] { width: 100%; padding: 0.5rem; font-size: 1.2rem; margin-top: 1rem; }
    button { padding: 0.5rem 1rem; font-size: 1rem; margin-top: 1rem; }
    #result { margin-top: 1rem; font-weight: bold; color: green; }
  </style>
</head>
<body>
  <div id="game-container">
    <h1>üîê Le Jeu du Mot Myst√®re</h1>
    <div id="rules"></div>
    <input type="text" id="phrase" placeholder="Tape ici ta phrase..." />
    <button onclick="checkRules()">V√©rifier</button>
    <div id="result"></div>
  </div>

  <script>
    const allRules = [
      phrase => phrase.split(' ').length >= 4 || "La phrase doit contenir au moins 4 mots.",
      phrase => phrase.length >= 20 || "La phrase doit faire au moins 20 caract√®res.",
      phrase => phrase.includes(',') || "La phrase doit contenir une virgule.",
      phrase => /[A-Z]/.test(phrase) || "La phrase doit contenir au moins une majuscule.",
      phrase => phrase.endsWith('.') || "La phrase doit se terminer par un point.",
      phrase => new Set(phrase.replace(/[^a-zA-Z]/g, '').toLowerCase()).size >= 10 || "La phrase doit utiliser au moins 10 lettres diff√©rentes.",
      phrase => phrase.split(' ').every(word => word.length <= 12) || "Aucun mot ne doit d√©passer 12 lettres.",
      phrase => (phrase.match(/[aeiouy√†√¢√§√©√®√™√´√Æ√Ø√¥√∂√π√ª√º√ø]/gi)?.length || 0) >= 8 || "La phrase doit contenir au moins 8 voyelles.",
      phrase => (phrase.match(/[!?]/g)?.length || 0) >= 1 || "La phrase doit contenir au moins un point d'exclamation ou un point d'interrogation.",
      phrase => phrase.split(' ').filter((w, i, arr) => arr.indexOf(w) !== i).length === 0 || "Aucun mot ne doit √™tre r√©p√©t√©.",
    ];

    let currentRuleIndex = 0;

    function checkRules() {
      const phrase = document.getElementById("phrase").value.trim();
      const resultDiv = document.getElementById("result");
      resultDiv.textContent = "";
      const rulesDiv = document.getElementById("rules");

      for (let i = 0; i <= currentRuleIndex; i++) {
        const rule = allRules[i];
        const validation = rule(phrase);
        if (typeof validation === "string") {
          resultDiv.style.color = "red";
          resultDiv.textContent = validation;
          return;
        }
      }

      if (currentRuleIndex < allRules.length - 1) {
        currentRuleIndex++;
        updateRules();
        resultDiv.style.color = "green";
        resultDiv.textContent = "‚úÖ R√®gle valid√©e ! Continue...";
      } else {
        resultDiv.style.color = "green";
        resultDiv.textContent = "üéâ F√©licitations ! Tu as trouv√© la bonne phrase !";
      }
    }

    function updateRules() {
      const rulesDiv = document.getElementById("rules");
      rulesDiv.innerHTML = "";
      for (let i = 0; i <= currentRuleIndex; i++) {
        const ruleText = allRules[i]("TEST") === true ? `R√®gle ${i + 1}` : allRules[i]("TEST");
        const div = document.createElement("div");
        div.className = "rule";
        div.textContent = `üß© ${ruleText}`;
        rulesDiv.appendChild(div);
      }
    }

    updateRules();
  </script>
</body>
</html>
